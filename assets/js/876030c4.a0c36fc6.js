"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[734],{3752:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(6540),s=n(4848);function a(e){let{src:t,options:n={}}=e;const a=(0,i.useRef)(null),[r,o]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e="asciinema-player-css";if(!document.getElementById(e)){const t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/npm/@asciinema/player@3.0.0/dist/themes/asciinema-player.css",document.head.appendChild(t)}const i="asciinema-player-script";let s=document.getElementById(i);s||(s=document.createElement("script"),s.id=i,s.src="https://cdn.jsdelivr.net/npm/@asciinema/player@3.0.0/dist/asciinema-player.min.js",s.async=!0,document.body.appendChild(s));const r=()=>{if(!window.AsciinemaPlayer)return void console.error("AsciinemaPlayer not available");const e=t.startsWith("http")?t:`${window.location.origin}${t}`;try{window.AsciinemaPlayer.create(e,a.current,{cols:120,rows:24,autoPlay:!0,fit:"width",...n}),o(!0)}catch(i){console.error("Player initialization failed:",i)}};return window.AsciinemaPlayer?r():s.onload=r,()=>{a.current&&(a.current.innerHTML="")}}),[t,n]),(0,s.jsx)("div",{ref:a,style:{minHeight:"300px",backgroundColor:r?"transparent":"#f5f5f5",borderRadius:"4px",margin:"20px 0",position:"relative"},children:!r&&(0,s.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#666"},children:"Loading player..."})})}},4931:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"capabilities/control_execution/watchpoint","title":"Watchpoints","description":"Overview of the watch command.","source":"@site/docs/capabilities/control_execution/watchpoint.mdx","sourceDirName":"capabilities/control_execution","slug":"/capabilities/control_execution/watchpoint","permalink":"/BugStalker/docs/capabilities/control_execution/watchpoint","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/capabilities/control_execution/watchpoint.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Stepping","permalink":"/BugStalker/docs/capabilities/control_execution/steps"},"next":{"title":"Catch the signal","permalink":"/BugStalker/docs/capabilities/control_execution/signal"}}');var s=n(4848),a=n(8453),r=n(5363),o=n(3752);const c={sidebar_position:3},l="Watchpoints",d={},h=[{value:"About",id:"about",level:2},{value:"Setting watchpoints",id:"setting-watchpoints",level:2},{value:"Usage example",id:"usage-example",level:2}];function p(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"watchpoints",children:"Watchpoints"})}),"\n",(0,s.jsxs)(t.p,{children:["Overview of the ",(0,s.jsx)(t.code,{children:"watch"})," command."]}),"\n",(0,s.jsx)(t.h2,{id:"about",children:"About"}),"\n",(0,s.jsxs)(t.p,{children:["A watchpoint is a ",(0,s.jsx)(t.em,{children:"data breakpoint"}),". This means the program stops when the variable (or expression, or raw memory region)\nbeing observed by the watchpoint is changed. Currently, watchpoints are based on ",(0,s.jsx)(t.code,{children:"x86-64"})," hardware breakpoints, which\nintroduces two limitations:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Only 4 watchpoints can be active at once."}),"\n",(0,s.jsx)(t.li,{children:"Watchpoints can only observe memory regions of 1, 2, 4, or 8 bytes in size."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"setting-watchpoints",children:"Setting watchpoints"}),"\n",(0,s.jsx)(t.p,{children:"You can set a watchpoint on variables (global or local) or on expressions involving variables. Watchpoints for local\nvariables are automatically removed when the variable goes out of scope. If a watchpoint observes a global variable,\nit remains active as long as the debugger is running."}),"\n",(0,s.jsxs)(t.p,{children:["Watchpoints are set with the ",(0,s.jsx)(t.code,{children:"watch"})," (or just ",(0,s.jsx)(t.code,{children:"w"}),") command:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch [+rw][+w] ( <addr>:<size> | <DQE> )"})," - set write or read-write watchpoint (write by default) for a memory location (size must be one of [1,2,4,8] bytes) or ",(0,s.jsx)(t.em,{children:"DQE"})," with variable"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch remove ( <addr>:<size> | <expression> | <number> )"})," - deactivate and delete the selected watchpoint"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch info"})," - show all watchpoints"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Some examples of setting watchpoints:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch my_var"})," (alias: ",(0,s.jsx)(t.code,{children:"w my_var"}),") - stop when variable value is rewritten"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch +rw my_var"})," - stop when variable value is read or rewritten"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch my_vector[0]"})," - stop when the first vector element is rewritten"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch (~my_vector).len"})," - stop when vector length changes"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"watch 0x100:4"})," - stop when writing to memory region [0x100:0x103]"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"usage-example",children:"Usage example"}),"\n",(0,s.jsx)(t.p,{children:"Consider this Rust function:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:'fn calculate_and_print(mut val: i32) {\n    val += 1;\n    val += 2;\n    val -= 5;\n    \n    print!("{val}");\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Let's watch the ",(0,s.jsx)(t.code,{children:"val"})," argument:"]}),"\n","\n",(0,s.jsx)(r.A,{children:()=>(0,s.jsx)(o.A,{src:"/BugStalker/casts/watch.cast"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},5363:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var i=n(9136),s=n(4848);function a(e){let{children:t,fallback:n}=e;return(0,i.A)()?(0,s.jsx)(s.Fragment,{children:t?.()}):n??null}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(6540);const s={},a=i.createContext(s);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);